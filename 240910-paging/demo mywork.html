<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .page{
            list-style:none;
            width:800px;
            margin:100px auto;
            justify-content:center;
            display:flex;
        }
        .page li{
            width:40px;
            height:40px;
            text-align:center;
            line-height:40px;
            border:1px solid #333;
            border-right:none;
            cursor:pointer;
        }
        .page li:last-child{
            border-right:1px solid #333;
        }
        .page li:hover{
            background:#ddd;
        }
        .active {
            background: #333;
            color: #fff;
        }
        .hidden {
            display:none;
        }
    </style>
</head>
<body>
    <h1 id="nowPage"></h1>
    <ul class="page" id="paging">
       <li></li>
       <li></li>
    </ul>
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script>
        $(function () {
            const totalPosts = 2745;  // 전체 포스트 수
            const postsPerPage = 7;  // 페이지당 보여질 포스트 수
            const displayPageNum = 10; // 보여질 페이징 수
            let currentPage = 1;

            const totalPages = ((totalPosts - 1) / postsPerPage) + 1;  //총 페이징 수




            function displayPosts(page) {
                const endPage = Math.ceil(currentPage / displayPageNum) * displayPageNum // 마지막 페이지 번호
                if (totalPages < endPage) {             // endpage 예외처리
                    endPage = totalPages;
                }
                const startPage = endPage - displayPageNum + 1;  // 시작하는 페이징번호

                // 페이지 번호생성
                const $paging = $('#paging');
                $paging.empty(); // 기존 페이지 목록 비우기



                //Prev 버튼 생성
                const $prevLi = $('<li></li>').text('Prev');
                if (page === 1) {
                    $prevLi.addClass('hidden');
                } else {
                    $prevLi.on('click', function () {
                        currentPage = page - 1;
                        displayPosts(currentPage);


                    });
                }
                $paging.append($prevLi);

                for (let i = startPage; i <= endPage; i++) {
                    const $li = $('<li></li>').text(i);
                if (i === page) {
                    $li.addClass('active'); //현재 페이지에 active 클래스 추가

                }
                $li.on('click', function () {
                    currentPage = i;
                    displayPosts(currentPage);


                });
                $paging.append($li);
                }
                // Next 추가
                const $nextLi = $('<li></li>').text('Next');
                if (page === totalPages) {
                    $nextLi.addClass('hidden');
                } else {
                    $nextLi.on('click', function () {
                        currentPage = page + 1;
                        displayPosts(currentPage);

                    })
                }
                $paging.append($nextLi);
                

                // 현재 페이지를 표시
                $("#nowPage").text(`현재 페이지: ${page}`);
            }
            displayPosts(currentPage);
        
        });
    </script>
</body>
</html>